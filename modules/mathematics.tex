% ========== MATHEMATICS MODULE ==========
% Load this module only when mathematical typesetting is needed

% Core math packages
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{fixmath}
\usepackage{siunitx}
\usepackage{mathtools}
\usepackage{empheq}
\usepackage{cases}
\usepackage{amsthm}
\usepackage{stmaryrd}
\usepackage{textcomp}
\usepackage{physics}
\usepackage{tensor}
\usepackage{braket}
\usepackage{cancel}

% Configure siunitx
\sisetup{
    group-separator={,},
    group-minimum-digits=4,
    detect-weight=true,
    detect-family=true
}

% Define common units
\DeclareSIUnit\USD{\$}
\DeclareSIUnit\hour{h}
\DeclareSIUnit\year{yr}

% Theorem environments
\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{example}{Example}[section]

\theoremstyle{remark}
\newtheorem{remark}{Remark}[section]
\newtheorem{note}{Note}[section]

% Math colors
\definecolor{mathblue}{RGB}{0,82,155}
\definecolor{mathred}{RGB}{204,0,0}
\definecolor{mathgreen}{RGB}{0,128,0}
\definecolor{mathpurple}{RGB}{128,0,128}

% Common mathematical sets
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\F}{\mathbb{F}}

% Enhanced derivatives
\renewcommand{\d}{\mathrm{d}}
\newcommand{\dt}{\frac{\d}{\d t}}
\newcommand{\dx}{\frac{\d}{\d x}}
\newcommand{\dy}{\frac{\d}{\d y}}
\newcommand{\dz}{\frac{\d}{\d z}}
\newcommand{\prt}{\partial}
\newcommand{\pdx}[1]{\frac{\partial #1}{\partial x}}
\newcommand{\pdy}[1]{\frac{\partial #1}{\partial y}}
\newcommand{\pdz}[1]{\frac{\partial #1}{\partial z}}
\newcommand{\pdt}[1]{\frac{\partial #1}{\partial t}}

% Vector calculus
\providecommand{\grad}{\nabla}
\providecommand{\divg}{\nabla \cdot}
\providecommand{\curl}{\nabla \times}
\providecommand{\lapl}{\nabla^2}

% Vectors and matrices
\newcommand{\vect}[1]{\mathbf{#1}}
\newcommand{\mat}[1]{\mathbf{#1}}
\newcommand{\T}{\mathsf{T}}

% Probability and statistics
\newcommand{\prob}[1]{\mathrm{P}\left(#1\right)}
\newcommand{\E}[1]{\mathrm{E}\left[#1\right]}
\renewcommand{\var}[1]{\mathrm{Var}\left(#1\right)}
\newcommand{\cov}[1]{\mathrm{Cov}\left(#1\right)}
\newcommand{\normal}{\mathcal{N}}
\newcommand{\uniform}{\mathcal{U}}

% Math operators
\providecommand{\tr}{\operatorname{tr}}
\providecommand{\diag}{\operatorname{diag}}
\providecommand{\rank}{\operatorname{rank}}
\newcommand{\sign}{\operatorname{sign}}
\providecommand{\lcm}{\operatorname{lcm}}
\providecommand{\gcd}{\operatorname{gcd}}

% Boxed equations
\newcommand{\boxedeq}[1]{\begin{empheq}[box=\fbox]{equation}#1\end{empheq}}
\newcommand{\colorboxedeq}[2]{\begin{empheq}[box={\fcolorbox{#1}{white}}]{equation}#2\end{empheq}}
